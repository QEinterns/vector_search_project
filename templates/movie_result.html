<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/movie_result.css">
    <script src="https://unpkg.com/phosphor-icons"></script>
    <link rel="stylesheet" href="https://unpkg.com/nice-forms.css@0.1.7/dist/nice-forms.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Dashboard</title>
</head>
<body>
    <div class="frnt">
        <header class="header">
            <div class="header-content responsive-wrapper">
                <div class="header-logo">
                    <a href="#" style="text-decoration: none;">
                        <div class="logoonly">
                            <img src="static/dashpics/logo.png" />
                        </div>
                        <h2 class="logotext">CBAAP</h2>
                    </a>
                </div>
                <div class="header-navigation">
                    <nav class="header-navigation-links">
                        <a href="#"> Home </a>
                        <a href="#"> History </a>
                    </nav>
                    <div class="header-navigation-actions">
                        <a href="#" class="button" onclick="logout()" style="background-color: rgb(30, 30, 30);color: white;margin-right: 0.3rem;">
                            <i style="color: white;" class="ph-sign-out-bold"></i>
                            <span>log out</span>
                        </a>
                        <a href="#" class="button">
                            <i class="ph-article-bold"></i>
                            <span>logger</span>
                        </a>
                        <a href="#" class="icon-button">
                            <i class="ph-gear-bold"></i>
                        </a>
                        <a href="#" class="icon-button">
                            <i class="ph-bell-bold"></i>
                        </a>
                        <a href="#" class="avatar">
                            <img src="https://assets.codepen.io/285131/hat-man.png" alt="" />
                        </a>
                    </div>
                </div>
                <a href="#" class="button">
                    <i class="ph-list-bold"></i>
                    <span>Menu</span>
                </a>
            </div>
        </header>
    </div>
    
    <div class="bdy1">

        <div class="container1">
            <form class="formy" method="post">
                <!-- <div class="formy"> -->
                    <div class="nice-form-group">
                        <label style="font-weight:800;font-size: large;">Movie Name</label>
                        <input type="text" placeholder="Movie Name" value="" id="movie_name" name="movie_name"/>
                      </div>
                    <div class="nice-form-group">
                        <label style="font-weight:800;font-size: large;">Query</label>
                        <textarea rows="5" value="" id="query" name="query"></textarea>
                      </div>
                      
                      <fieldset class="nice-form-group" style="border: none;">
                        <legend style="font-weight:800;font-size: large;">Select your Query Enhancer LLM</legend>
                        <div class="nice-form-group">
                            <input type="checkbox" id="openorcaMistral" name="queryEnhancer" value="Openorca Mistral" />
                            <label for="openorcaMistral">Openorca Mistral</label>
                        </div>
                        
                        <div class="nice-form-group">
                            <input type="checkbox" id="openorcaSpectral" name="queryEnhancer" value="Openorca Spectral"/>
                            <label for="openorcaSpectral">Openorca Spectral</label>
                        </div>
                    </fieldset>
                    
                    <fieldset class="nice-form-group" style="border: none;">
                        <legend style="font-weight:800;font-size: large;">Select your Text to Image model</legend>
                        <div class="nice-form-group">
                            <input type="checkbox" id="proteus" name="textToImage" value="Proteus"/>
                            <label for="proteus">Proteus</label>
                        </div>
                        
                        <div class="nice-form-group">
                            <input type="checkbox" id="playground" name="textToImage" value="Playground"/>
                            <label for="playground">Playground</label>
                        </div>
                    
                        <div class="nice-form-group">
                            <input type="checkbox" id="openjourney" name="textToImage" value="Openjourney"/>
                            <label for="openjourney">Openjourney</label>
                        </div>
                    
                        <div class="nice-form-group">
                            <input type="checkbox" id="stableDiffusionX" name="textToImage" value="Stable diffusion X"/>
                            <label for="stableDiffusionX">Stable diffusion X</label>
                        </div>
                    </fieldset>
                    
                    <div class="nice-form-group">
                        <label style="font-weight:800;font-size: large;">Quality</label>
                        <input type="range" min="0" max="15" name="quality" />
                    </div>
                    
                    <button type="submit" class="btn1" id="generateBtn">Generate</button>
                      
                    
            
                <!-- </div> -->
            </form>
    
    
            <div class="righty">
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-logo">
                            <span class="logo-circle">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="419.116" viewBox="0 0 512 419.116">
                                    <defs>
                                        <clipPath id="clip-folder-new">
                                            <rect width="512" height="419.116" />
                                        </clipPath>
                                    </defs>
                                    <g id="folder-new" clip-path="url(#clip-folder-new)">
                                        <path id="Union_1" data-name="Union 1" d="M16.991,419.116A16.989,16.989,0,0,1,0,402.125V16.991A16.989,16.989,0,0,1,16.991,0H146.124a17,17,0,0,1,10.342,3.513L227.217,57.77H437.805A16.989,16.989,0,0,1,454.8,74.761v53.244h40.213A16.992,16.992,0,0,1,511.6,148.657L454.966,405.222a17,17,0,0,1-16.6,13.332H410.053v.562ZM63.06,384.573H424.722L473.86,161.988H112.2Z" fill="var(--c-action-primary)" stroke="" stroke-width="1" />
                                    </g>
                                </svg>
                            </span>
                        </div>
                        <!-- <button class="btn-close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" fill="var(--c-text-secondary)"/></svg>
                        </button> -->
                    </div>
                    <div class="modal-body">
                        <h2 class="modal-title">Generated Images</h2>
                        <p class="modal-description">Model results</p>
                        <div class="upload-area">
                            
                           
                            <div class="image-grid">
                                <div class="image">
                                    <img src="static/output/q1.png" alt="Image 1">
                                </div>
                                <div class="image">
                                    <img src="static/output/q2.png" alt="Image 2">
                                </div>
                                <div class="image">
                                    <img src="static/output/q3.png" alt="Image 3">
                                </div>
                                <div class="image">
                                    <img src="static/output/q4.png" alt="Image 4">
                                </div>
                            </div>
                            
                            
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!-- <button class="btn-secondary">Cancel</button> -->
                        <button class="btn-primary"  id="downloadButton">Download images</button>
                    </div>
                </div>
            </div>
    
    
        </div>

        
    </div>
        
    <script>
        // JavaScript to allow only one checkbox to be selected per group
        const queryEnhancerCheckboxes = document.querySelectorAll('input[name="queryEnhancer"]');
        const textToImageCheckboxes = document.querySelectorAll('input[name="textToImage"]');
        
        function handleCheckboxGroup(group) {
            group.forEach((checkbox) => {
                checkbox.addEventListener('click', function() {
                    group.forEach((cb) => {
                        if (cb !== checkbox && cb.checked) {
                            cb.checked = false;
                        }
                    });
                });
            });
        }
        
        handleCheckboxGroup(queryEnhancerCheckboxes);
        handleCheckboxGroup(textToImageCheckboxes);
    
        // JavaScript to handle generating and posting the response
        document.getElementById('generateBtn').addEventListener('click', function() {
            const selectedQueryEnhancer = document.querySelector('input[name="queryEnhancer"]:checked');
            const selectedTextToImage = document.querySelector('input[name="textToImage"]:checked');
            const quality = document.querySelector('input[type="range"]').value;
    
            // Create response object
            const response = {
                queryEnhancer: selectedQueryEnhancer ? selectedQueryEnhancer.value : null,
                textToImage: selectedTextToImage ? selectedTextToImage.value : null,
                quality: quality
            };
    
            // Post response object
            console.log(response); // Replace with your actual code to post the response
        });
    </script>
  
  <script>
      document.getElementById('downloadButton').addEventListener('click', function() {
          // Send an AJAX request to the Flask route
          var xhr = new XMLHttpRequest();
          xhr.open('GET', '/download_files', true);
          xhr.responseType = 'blob'; // Set the response type to blob
          xhr.onload = function() {
              // Check if the request was successful
              if (xhr.status === 200) {
                  // Create a blob URL from the response
                  var blob = new Blob([xhr.response], { type: 'application/zip' });
                  var url = window.URL.createObjectURL(blob);
      
                  // Create a temporary link element
                  var link = document.createElement('a');
                  link.href = url;
                  link.download = 'files.zip'; // Specify the filename for the download
                  document.body.appendChild(link);
      
                  // Trigger the download
                  link.click();
      
                  // Clean up
                  window.URL.revokeObjectURL(url);
                  document.body.removeChild(link);
              }
          };
          xhr.send();
      });
      </script>
      <script>
          $(document).ready(function() {
      
              $('#home').click(function() {
                  window.location.href = '/';
              });
          });
          </script>
  
  <script>
      $(document).ready(function() {
  
          $('#create').click(function() {
              window.location.href = '/create';
          });
      });
      </script>
      <script>
        function logout() {
        // Send an AJAX request to the logout route
        fetch('/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            // You may include a CSRF token in the request if your application uses CSRF protection
            // body: JSON.stringify({ csrf_token: 'your_csrf_token' }),
        })
        .then(response => {
            // Check if the logout was successful
            if (response.ok) {
                // Redirect to the login page or perform any other desired action
                window.location.href = '/login';
            } else {
                // Handle error cases
                console.error('Logout failed');
            }
        })
        .catch(error => {
            // Handle network errors
            console.error('Network error:', error);
        });
    }
      </script>
</body>
</html>